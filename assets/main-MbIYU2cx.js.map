{"version":3,"file":"main-MbIYU2cx.js","sources":["../../src/main.ts"],"sourcesContent":["/**\n * 履约驱动酒店管理系统 - 主入口文件\n * \"我们不管理客房，我们管理客人\"\n */\n\nimport './style.css'\n\n// 版本信息\nconst APP_VERSION = '1.1.0'\nconst BUILD_TIME = new Date().toISOString()\n\n// 后端API配置\nconst API_BASE_URL = 'https://fulfillment-backend.up.railway.app' // 稍后替换为您的实际Railway URL\n\n// 应用初始化\ndocument.querySelector<HTMLDivElement>('#app')!.innerHTML = `\n  <div class=\"app-container\">\n    <header class=\"app-header\">\n      <div class=\"header-content\">\n        <div class=\"logo\">\n          <span class=\"logo-icon\">🏨</span>\n          <h1>履约驱动酒店管理系统</h1>\n        </div>\n        <div class=\"version\">v${APP_VERSION}</div>\n      </div>\n    </header>\n\n    <main class=\"main-content\">\n      <section class=\"hero\">\n        <h2 class=\"hero-title\">\"我们不管理客房，我们管理客人\"</h2>\n        <p class=\"hero-subtitle\">\n          基于五阶段履约流程的现代化酒店管理解决方案<br/>\n          采用DDD+XState+RxDB技术栈，支持离线优先和瞬时响应\n        </p>\n      </section>\n\n      <section class=\"features\">\n        <div class=\"feature-grid\">\n          <div class=\"feature-card\">\n            <div class=\"feature-icon\">🎯</div>\n            <h3>履约驱动架构</h3>\n            <p>以客人履约历程为中心的业务架构，五阶段流程精确管理客人价值实现</p>\n            <div class=\"feature-stages\">\n              <span class=\"stage\">认知</span>\n              <span class=\"arrow\">→</span>\n              <span class=\"stage\">评估</span>\n              <span class=\"arrow\">→</span>\n              <span class=\"stage\">预订</span>\n              <span class=\"arrow\">→</span>\n              <span class=\"stage\">体验</span>\n              <span class=\"arrow\">→</span>\n              <span class=\"stage\">反馈</span>\n            </div>\n          </div>\n\n          <div class=\"feature-card\">\n            <div class=\"feature-icon\">⚡</div>\n            <h3>性能卓越</h3>\n            <p>厚客户端架构确保瞬时响应，本地查询&lt;10ms，批量处理≥1000条/秒</p>\n            <div class=\"performance-metrics\">\n              <div class=\"metric\">\n                <span class=\"metric-value\">&lt;10ms</span>\n                <span class=\"metric-label\">本地查询</span>\n              </div>\n              <div class=\"metric\">\n                <span class=\"metric-value\">&lt;50ms</span>\n                <span class=\"metric-label\">状态转换</span>\n              </div>\n              <div class=\"metric\">\n                <span class=\"metric-value\">≥1000</span>\n                <span class=\"metric-label\">条/秒处理</span>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"feature-card\">\n            <div class=\"feature-icon\">📱</div>\n            <h3>离线优先</h3>\n            <p>基于RxDB的离线优先架构，网络中断不影响业务，自动数据同步</p>\n            <div class=\"offline-features\">\n              <div class=\"offline-item\">✓ 完全离线可用</div>\n              <div class=\"offline-item\">✓ 双向数据同步</div>\n              <div class=\"offline-item\">✓ 冲突自动解决</div>\n              <div class=\"offline-item\">✓ 多设备一致性</div>\n            </div>\n          </div>\n\n          <div class=\"feature-card\">\n            <div class=\"feature-icon\">🏗️</div>\n            <h3>DDD领域设计</h3>\n            <p>领域驱动设计确保业务逻辑清晰，聚合根管理复杂业务规则</p>\n            <div class=\"ddd-components\">\n              <div class=\"ddd-item\">Guest聚合根</div>\n              <div class=\"ddd-item\">FulfillmentJourney聚合根</div>\n              <div class=\"ddd-item\">履约事件系统</div>\n              <div class=\"ddd-item\">领域服务</div>\n            </div>\n          </div>\n\n          <div class=\"feature-card\">\n            <div class=\"feature-icon\">🎛️</div>\n            <h3>XState状态机</h3>\n            <p>可视化状态机管理复杂履约流程，支持并行状态和异常处理</p>\n            <div class=\"state-features\">\n              <div class=\"state-item\">可视化流程设计</div>\n              <div class=\"state-item\">并行状态支持</div>\n              <div class=\"state-item\">超时自动处理</div>\n              <div class=\"state-item\">异常恢复机制</div>\n            </div>\n          </div>\n\n          <div class=\"feature-card\">\n            <div class=\"feature-icon\">🧪</div>\n            <h3>质量保障</h3>\n            <p>90%测试覆盖率，完整的CI/CD流水线，企业级质量标准</p>\n            <div class=\"quality-metrics\">\n              <div class=\"quality-item\">\n                <span class=\"quality-percentage\">90%+</span>\n                <span class=\"quality-label\">测试覆盖率</span>\n              </div>\n              <div class=\"quality-item\">\n                <span class=\"quality-percentage\">100%</span>\n                <span class=\"quality-label\">类型安全</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section class=\"architecture\">\n        <h2>技术架构</h2>\n        <div class=\"tech-stack\">\n          <div class=\"tech-category\">\n            <h3>前端技术栈</h3>\n            <div class=\"tech-list\">\n              <span class=\"tech-item\">TypeScript 5.x</span>\n              <span class=\"tech-item\">XState 5.x</span>\n              <span class=\"tech-item\">RxDB 16.x</span>\n              <span class=\"tech-item\">Vite 5.x</span>\n              <span class=\"tech-item\">Vitest</span>\n            </div>\n          </div>\n          <div class=\"tech-category\">\n            <h3>后端技术栈</h3>\n            <div class=\"tech-list\">\n              <span class=\"tech-item\">Node.js</span>\n              <span class=\"tech-item\">CouchDB</span>\n              <span class=\"tech-item\">Redis</span>\n              <span class=\"tech-item\">Docker</span>\n              <span class=\"tech-item\">GitHub Actions</span>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section class=\"demo-section\">\n        <h2>项目展示</h2>\n        <div class=\"demo-content\">\n          <p>这是一个完整的履约驱动酒店管理系统演示。</p>\n          <p><strong>注意</strong>: 完整的前端应用正在开发中，当前展示为项目介绍页面。</p>\n          \n          <div class=\"demo-links\">\n            <button id=\"test-backend-btn\" class=\"demo-link\">\n              <span class=\"link-icon\">🔧</span>\n              测试后端API\n            </button>\n            <a href=\"https://github.com/archpeng/fulfillment-driven-hotel-management\" \n               class=\"demo-link\" target=\"_blank\" rel=\"noopener\">\n              <span class=\"link-icon\">📚</span>\n              查看源代码\n            </a>\n            <a href=\"https://github.com/archpeng/fulfillment-driven-hotel-management/blob/main/CLAUDE.md\" \n               class=\"demo-link\" target=\"_blank\" rel=\"noopener\">\n              <span class=\"link-icon\">🏗️</span>\n              架构文档\n            </a>\n            <a href=\"https://github.com/archpeng/fulfillment-driven-hotel-management/blob/main/README.md\" \n               class=\"demo-link\" target=\"_blank\" rel=\"noopener\">\n              <span class=\"link-icon\">📖</span>\n              项目文档\n            </a>\n          </div>\n          <div id=\"api-test-result\" class=\"api-result\" style=\"display: none;\"></div>\n        </div>\n      </section>\n    </main>\n\n    <footer class=\"app-footer\">\n      <div class=\"footer-content\">\n        <p>&copy; 2025 履约驱动酒店管理系统 | \n           <a href=\"https://github.com/archpeng\" target=\"_blank\" rel=\"noopener\">archpeng</a>\n        </p>\n        <p>构建时间: ${BUILD_TIME.split('T')[0]}</p>\n      </div>\n    </footer>\n  </div>\n`\n\n// 添加交互功能\ndocument.addEventListener('DOMContentLoaded', () => {\n  // 平滑滚动\n  document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n    anchor.addEventListener('click', function (e) {\n      e.preventDefault();\n      const target = document.querySelector(this.getAttribute('href')!);\n      if (target) {\n        target.scrollIntoView({ behavior: 'smooth' });\n      }\n    });\n  });\n\n  // 特性卡片悬停效果\n  document.querySelectorAll('.feature-card').forEach(card => {\n    card.addEventListener('mouseenter', () => {\n      card.style.transform = 'translateY(-5px)';\n      card.style.boxShadow = '0 10px 30px rgba(0,0,0,0.2)';\n    });\n    \n    card.addEventListener('mouseleave', () => {\n      card.style.transform = 'translateY(0)';\n      card.style.boxShadow = '0 4px 15px rgba(0,0,0,0.1)';\n    });\n  });\n\n  // 后端API测试功能\n  document.getElementById('test-backend-btn')?.addEventListener('click', async () => {\n    const button = document.getElementById('test-backend-btn') as HTMLButtonElement;\n    const resultDiv = document.getElementById('api-test-result') as HTMLDivElement;\n    \n    button.disabled = true;\n    button.textContent = '测试中...';\n    resultDiv.style.display = 'block';\n    resultDiv.innerHTML = '<p>🔄 正在连接后端API...</p>';\n    \n    try {\n      // 测试健康检查\n      const healthResponse = await fetch(`${API_BASE_URL}/health`);\n      const healthData = await healthResponse.json();\n      \n      // 测试版本信息\n      const versionResponse = await fetch(`${API_BASE_URL}/api/version`);\n      const versionData = await versionResponse.json();\n      \n      resultDiv.innerHTML = `\n        <div class=\"api-success\">\n          <h4>✅ 后端API连接成功！</h4>\n          <div class=\"api-details\">\n            <p><strong>服务状态：</strong>${healthData.status}</p>\n            <p><strong>服务版本：</strong>${versionData.version}</p>\n            <p><strong>架构模式：</strong>${versionData.architecture}</p>\n            <p><strong>响应时间：</strong>${Date.now() - performance.now()}ms</p>\n            <p><strong>后端地址：</strong><a href=\"${API_BASE_URL}\" target=\"_blank\">${API_BASE_URL}</a></p>\n          </div>\n        </div>\n      `;\n    } catch (error) {\n      resultDiv.innerHTML = `\n        <div class=\"api-error\">\n          <h4>❌ 后端API连接失败</h4>\n          <p>后端服务可能还未部署或启动</p>\n          <p><strong>错误信息：</strong>${error.message}</p>\n          <p><strong>预期地址：</strong>${API_BASE_URL}</p>\n          <p><em>请参考部署指南完成后端部署</em></p>\n        </div>\n      `;\n    } finally {\n      button.disabled = false;\n      button.innerHTML = '<span class=\"link-icon\">🔧</span>测试后端API';\n    }\n  });\n\n  console.log('🎉 履约驱动酒店管理系统已启动！');\n  console.log('📊 当前版本:', APP_VERSION);\n  console.log('🏗️ 架构: DDD + XState + RxDB');\n  console.log('🔗 后端API:', API_BASE_URL);\n});"],"names":["APP_VERSION","BUILD_TIME","API_BASE_URL","anchor","e","target","card","_a","button","resultDiv","healthData","versionData","error"],"mappings":"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"}